(window.webpackJsonpphonebook=window.webpackJsonpphonebook||[]).push([[0],{16:function(e,t,n){e.exports=n(39)},21:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),u=n.n(c),o=(n(21),n(14)),l=n(15),i=n(2),s=n(3),f=n.n(s),m="http://localhost:3001/api/persons",b=function(){return f.a.get(m).then(function(e){return e.data})},d=function(e){return f.a.post(m,e).then(function(e){return e.data})},h=function(e){return f.a.delete("".concat(m,"/").concat(e))},p=function(e,t){return f.a.put("".concat(m,"/").concat(e),t).then(function(e){return e.data})},w=function(e){var t=e.details,n=e.deleteMe,a=t.id,c=t.name,u=t.number;return r.a.createElement("li",null,"".concat(c," : ").concat(u)," ",r.a.createElement("button",{onClick:function(){return n(a,c)}},"Delete"))},E=function(e){var t=e.message;return null===t?null:r.a.createElement("div",{className:"success"===t.status?"error-box":"error-box failure"},t.message)};function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var y=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(""),s=Object(i.a)(u,2),f=s[0],m=s[1],y=Object(a.useState)(""),O=Object(i.a)(y,2),v=O[0],j=O[1],S=Object(a.useState)([]),k=Object(i.a)(S,2),x=k[0],D=k[1],P=Object(a.useState)(null),N=Object(i.a)(P,2),C=N[0],T=N[1];Object(a.useEffect)(function(){b().then(function(e){return D(e)})},[]);var F=function(e,t){window.confirm("Are you sure you want to delete ".concat(t," from the contacts ?"))&&(h(e).catch(function(){T({message:"".concat(t," is already deleted from the server"),status:"failure"}),setTimeout(function(){T(null)},3e3)}),D(x.filter(function(t){return t.id!==e})),T({message:"Deleted Successfully!",status:"success"}),setTimeout(function(){T(null)},3e3))};return r.a.createElement("div",null,r.a.createElement(E,{message:C}),r.a.createElement("div",null,r.a.createElement("h2",null,"Search Contancts : "),r.a.createElement("label",{htmlFor:"search"},"Write the name to look for : "),r.a.createElement("input",{type:"text",id:"search",value:v,onChange:function(e){return j(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=x.find(function(e){return e.name===n});if("undefined"!==typeof t)window.confirm("".concat(n," already exists in the list. Do you wanna replace the old number with the new ?"))&&p(t.id,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach(function(t){Object(o.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{number:f})).then(function(e){return D(x.map(function(n){return n.id===t.id?e:n}))}).then(function(){T({message:"".concat(t.name," was updated successfully"),status:"success"})}).catch(function(){T({message:"There was an error please try again",status:"failure"})}).then(function(){return setTimeout(function(){T(null)},3e3)});else{var a={name:n,number:f};d(a).then(function(e){return D(x.concat(e))}).then(function(){T({message:"".concat(a.name," was added successfully"),status:"success"})}).catch(function(){T({message:"There was an error please try again",status:"failure"})}).then(function(){c(""),m(""),setTimeout(function(){T(null)},3e3)})}}},r.a.createElement("h2",null,"Add New : "),r.a.createElement("label",{htmlFor:"newName"},"Write the name of the new number : "),r.a.createElement("input",{type:"text",id:"newName",value:n,onChange:function(e){return c(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"newNumber"},"Write the number : "),r.a.createElement("input",{type:"text",id:"newNumber",value:f,onChange:function(e){return m(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("button",{type:"submit"},"Save New "))),r.a.createElement("div",null,r.a.createElement("h2",null,"Contancts : "),function(){var e=new RegExp(v,"gi"),t=""===e?Object(l.a)(x):x.filter(function(t){return t.name.match(e)});return t=t.map(function(e){return r.a.createElement(w,{key:e.id,details:e,deleteMe:F})}),r.a.createElement("ul",null,t)}()))};u.a.render(r.a.createElement(y,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.f7e724ff.chunk.js.map