(window.webpackJsonpphonebook=window.webpackJsonpphonebook||[]).push([[0],{16:function(e,t,n){e.exports=n(39)},21:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(13),u=n.n(c),o=(n(21),n(14)),l=n(15),i=n(2),s=n(3),f=n.n(s),m="/api/persons",d=function(){return f.a.get(m).then(function(e){return e.data})},b=function(e){return f.a.post(m,e).then(function(e){return e.data})},h=function(e){return f.a.delete("".concat(m,"/").concat(e))},p=function(e,t){return f.a.put("".concat(m,"/").concat(e),t).then(function(e){return e.data})},w=function(e){var t=e.details,n=e.deleteMe,r=t.id,c=t.name,u=t.number;return a.a.createElement("li",null,"".concat(c," : ").concat(u)," ",a.a.createElement("button",{onClick:function(){return n(r,c)}},"Delete"))},g=function(e){var t=e.message;return null===t?null:a.a.createElement("div",{className:"success"===t.status?"error-box":"error-box failure"},t.message)};function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var O=function(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1],u=Object(r.useState)(""),s=Object(i.a)(u,2),f=s[0],m=s[1],O=Object(r.useState)(""),v=Object(i.a)(O,2),y=v[0],j=v[1],S=Object(r.useState)([]),k=Object(i.a)(S,2),x=k[0],D=k[1],P=Object(r.useState)(null),N=Object(i.a)(P,2),C=N[0],T=N[1];Object(r.useEffect)(function(){d().then(function(e){return D(e)})},[]);var F=function(e,t){window.confirm("Are you sure you want to delete ".concat(t," from the contacts ?"))&&(h(e).catch(function(){T({message:"".concat(t," is already deleted from the server"),status:"failure"}),setTimeout(function(){T(null)},3e3)}),D(x.filter(function(t){return t.id!==e})),T({message:"Deleted Successfully!",status:"success"}),setTimeout(function(){T(null)},3e3))};return a.a.createElement("div",null,a.a.createElement(g,{message:C}),a.a.createElement("div",null,a.a.createElement("h2",null,"Search Contancts : "),a.a.createElement("label",{htmlFor:"search"},"Write the name to look for : "),a.a.createElement("input",{type:"text",id:"search",value:y,onChange:function(e){return j(e.target.value)}})),a.a.createElement("div",null,a.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=x.find(function(e){return e.name===n});if("undefined"!==typeof t)window.confirm("".concat(n," already exists in the list. Do you wanna replace the old number with the new ?"))&&p(t.id,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach(function(t){Object(o.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{number:f})).then(function(e){return D(x.map(function(n){return n.id===t.id?e:n}))}).then(function(){T({message:"".concat(t.name," was updated successfully"),status:"success"})}).catch(function(){T({message:"There was an error please try again",status:"failure"})}).then(function(){return setTimeout(function(){T(null)},3e3)});else{var r={name:n,number:f};b(r).then(function(e){return D(x.concat(e))}).then(function(){T({message:"".concat(r.name," was added successfully"),status:"success"})}).catch(function(e){T({message:e.response.data.error,status:"failure"}),console.log(e.response.data.error)}).then(function(){c(""),m(""),setTimeout(function(){T(null)},3e3)})}}},a.a.createElement("h2",null,"Add New : "),a.a.createElement("label",{htmlFor:"newName"},"Write the name of the new number : "),a.a.createElement("input",{type:"text",id:"newName",value:n,onChange:function(e){return c(e.target.value)},minLength:"8"}),a.a.createElement("br",null),a.a.createElement("label",{htmlFor:"newNumber"},"Write the number : "),a.a.createElement("input",{type:"text",id:"newNumber",value:f,onChange:function(e){return m(e.target.value)}}),a.a.createElement("br",null),a.a.createElement("button",{type:"submit"},"Save New "))),a.a.createElement("div",null,a.a.createElement("h2",null,"Contancts : "),function(){var e=new RegExp(y,"gi"),t=""===e?Object(l.a)(x):x.filter(function(t){return t.name.match(e)});return t=t.map(function(e){return a.a.createElement(w,{key:e.id,details:e,deleteMe:F})}),a.a.createElement("ul",null,t)}()))};u.a.render(a.a.createElement(O,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.b8a287ae.chunk.js.map